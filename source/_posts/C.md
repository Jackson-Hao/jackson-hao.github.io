---
title: C语言程序设计笔记
date: 2024-3-7 20:00:00
tags: 
- 程序设计
- C语言
cover: https://s21.ax1x.com/2024/06/09/pkNdCDg.jpg
categories: 程序设计
---
# C语言程序设计笔记
---
## 目录
- [C语言程序设计笔记](#c语言程序设计笔记)
  - [目录](#目录)
  - [前言](#前言)
  - [程序设计基础](#程序设计基础)
      - [一个简单C程序](#一个简单c程序)
  - [C语言的基础数据类型](#c语言的基础数据类型)
      - [ASCII码](#ascii码)
      - [完整ASCII码表](#完整ascii码表)
      - [基本数据类型](#基本数据类型)
        - [例子：体验实数的误差](#例子体验实数的误差)
        - [例子：整型数据的溢出](#例子整型数据的溢出)
        - [例子：无符号输出负数](#例子无符号输出负数)
      - [常量](#常量)
      - [变量](#变量)
        - [例子：数据类型](#例子数据类型)
  - [整形数据的输入输出](#整形数据的输入输出)
  - [浮点型数据](#浮点型数据)
      - [浮点数比大小](#浮点数比大小)
      - [浮点数修饰](#浮点数修饰)
      - [字符的输入输出](#字符的输入输出)
  - [指针](#指针)
  - [数据类型转换](#数据类型转换)
  - [输入输出](#输入输出)
  - [运算符](#运算符)
    - [算术运算符](#算术运算符)
    - [关系运算符](#关系运算符)
    - [逻辑运算符](#逻辑运算符)
    - [位运算符](#位运算符)
    - [赋值运算符](#赋值运算符)
    - [条件运算符](#条件运算符)
    - [逗号运算符](#逗号运算符)
    - [优先级和结合性](#优先级和结合性)
  - [编译预处理](#编译预处理)
    - [宏定义](#宏定义)
    - [条件编译](#条件编译)
    - [文件包含](#文件包含)
  - [附录](#附录)
    - [常用函数及其用法总结](#常用函数及其用法总结)
      - [rand() 与 srand()](#rand-与-srand)
        - [例题](#例题)
---
## 前言

<center>
<font size=5>
<font face=STSong>
没有伤痕累累，哪来皮糙肉厚，英雄自古多磨难
</font>
</font>
</center>

---
## 程序设计基础
#### 一个简单C程序
```c
#include <stdio.h>
int main(){
  double r,area; //定义半径和面积
  printf("请输入圆的半径：");
  scanf("%f",&r); //&r是取地址符,表示将r的地址传递给scanf函数
  area = 3.14159*r*r;
  printf("圆的面积是：%.2lf\n",area);
  return 0;
}
```
## C语言的基础数据类型
#### ASCII码
- 空格 32
- 0 48
- A 65
- a 97
#### 完整ASCII码表
| ASCII值 | 字符 | ASCII值 | 字符 | ASCII值 | 字符 | ASCII值 | 字符 |
|---------|------|---------|------|---------|------|---------|------|
| 0       | NUL  | 32      | SP   | 64      | @    | 96      | `    |
| 1       | SOH  | 33      | !    | 65      | A    | 97      | a    |
| 2       | STX  | 34      | "    | 66      | B    | 98      | b    |
| 3       | ETX  | 35      | #    | 67      | C    | 99      | c    |
| 4       | EOT  | 36      | $    | 68      | D    | 100     | d    |
| 5       | ENQ  | 37      | %    | 69      | E    | 101     | e    |
| 6       | ACK  | 38      | &    | 70      | F    | 102     | f    |
| 7       | BEL  | 39      | '    | 71      | G    | 103     | g    |
| 8       | BS   | 40      | (    | 72      | H    | 104     | h    |
| 9       | HT   | 41      | )    | 73      | I    | 105     | i    |
| 10      | LF   | 42      | *    | 74      | J    | 106     | j    |
| 11      | VT   | 43      | +    | 75      | K    | 107     | k    |
| 12      | FF   | 44      | ,    | 76      | L    | 108     | l    |
| 13      | CR   | 45      | -    | 77      | M    | 109     | m    |
| 14      | SO   | 46      | .    | 78      | N    | 110     | n    |
| 15      | SI   | 47      | /    | 79      | O    | 111     | o    |
| 16      | DLE  | 48      | 0    | 80      | P    | 112     | p    |
| 17      | DC1  | 49      | 1    | 81      | Q    | 113     | q    |
| 18      | DC2  | 50      | 2    | 82      | R    | 114     | r    |
| 19      | DC3  | 51      | 3    | 83      | S    | 115     | s    |
| 20      | DC4  | 52      | 4    | 84      | T    | 116     | t    |
| 21      | NAK  | 53      | 5    | 85      | U    | 117     | u    |
| 22      | SYN  | 54      | 6    | 86      | V    | 118     | v    |
| 23      | ETB  | 55      | 7    | 87      | W    | 119     | w    |
| 24      | CAN  | 56      | 8    | 88      | X    | 120     | x    |
| 25      | EM   | 57      | 9    | 89      | Y    | 121     | y    |
| 26      | SUB  | 58      | :    | 90      | Z    | 122     | z    |
| 27      | ESC  | 59      | ;    | 91      | [    | 123     | {    |
| 28      | FS   | 60      | <    | 92      | \    | 124     | \|   |
| 29      | GS   | 61      | =    | 93      | ]    | 125     | }    |
| 30      | RS   | 62      | >    | 94      | ^    | 126     | ~    |
| 31      | US   | 63      | ?    | 95      | _    | 127     | DEL  |

#### 基本数据类型
- 基本类型
  - 整型
    - 有符号整型
      - char
        - 范围：-128~127，对应的格式控制符为%c
      - short
      - int
        - 占用 $2^{32}-1$ 位,从$-2^{31}$到$2^{31}-1$，负数比正数多一个，对应的格式控制符为%d
      - long
      - long long
    - 无符号整型
      - unsigned char
      - unsigned short
      - unsigned int
        - 取值范围为0~$2^{32}-1$，对应的格式控制符为%u
      - unsigned long
      - unsigned long long
    - **注意：整型和字符型的存储空间大小是平台相关的，可以互相兼容**
  - 浮点型
    - 单精度
      - float
        - 数的浮点表示形式：阶码和尾数
          - 阶码：用来表示数的次方，采用补码表示，占用一个字节，阶符位为0表示正数，为1表示负数
          - 尾数：用来表示数的有效数字，采用补码表示，占用三个字节
          - 范围$\pm 3.4*10^{38}$，对应的格式控制符为%f
    - 双精度
      - double
        - 范围$\pm 1.7*10^{308}$，对应的格式控制符为%lf
  - 字符型
  - 枚举型
- 构造类型
- 指针类型
- 空类型
##### 例子：体验实数的误差
```c
#include <stdio.h>
int main(){
  float d=3.500001,s;
  int i=0;
  int s=0;
  for (i=0;i<1000000;i++){
    s+=d;
  }
  printf("%f\n",s); 
  // 如果换成double类型，结果是3500001.000000
}
```
##### 例子：整型数据的溢出
```c
#include <stdio.h>
int main(){
  int a=2147483647;
  printf("%d\n",a+1); //输出结果为-2147483648
  // 原因：int类型的取值范围为-2147483648~2147483647，加上1之后就会溢出
  int b=-2147483648;
  printf("%d\n",b-1); //输出结果为2147483647
}
```

##### 例子：无符号输出负数

```c
#include <stdio.h>
int main(){
  int a=-1;
  printf("%u\n",a); //输出结果为4294967295
  // 原因：-1的补码为11111111 11111111 11111111 11111111，转换为无符号数就是4294967295
}

```
#### 常量
- 常量
  - 整型常量
    - 十进制
    - 八进制
    - 十六进制
      - 0x00001
  - 实型常量
    - 小数表示
    - 科学计数法
      - 2.5e-3，3.2e2
  - 字符常量
    - 一般字符常量
      - 'A'，'a'
      - 'a'-32='A'，在内存中存储的是ASCII码
    - 转义常量
      - \n 换行
      - \t 制表
        - 8个字符为一个输出区，\t表示跳到下一个输出区
      - \r 回车
      - \b 退格
      - \f 换页
      - \0 空字符
      - \ooo 三位八进制
        - 表示1~377的字符,可以不用前缀0
      - \ddd 八进制
      - \xhh 十六进制
      - \\\ 反斜杠
      - \0 空字符
        - 表示0的字符，用\0比0更直观
  - 字符串常量
    - 字符串的存储占用多个字符的存储空间，结尾有一个\0
    - 字符串和字符数组的区别
      - 字符串是字符数组的一种特殊形式，一个字符占用一个字节
      - 字符串以\0结尾
  - 符号常量
    - #define PI 3.14159
      - #define不是C语言的一部分，是预处理命令，不能以分号结尾
      - #define没有数据类型，只是简单的文本替换
    - const double PI = 3.14159
      -const是C语言的关键字，const修饰的变量是只读的，凡是const定义的变量不能出现在赋值号的左侧，它是一个左值
#### 变量
变量必须先定义后使用，定义变量的格式为：数据类型 变量名;
符号名空间到逻辑地址，逻辑地址到物理地址
变量定义的规则：
- 变量名由字母、数字、下划线组成，不能以数字开头
  - 如：a1，_a，a_，_1，但是不能是1a
- 变量名区分大小写
  - 如：a和A是两个不同的变量
- 不能使用C语言的关键字作为变量名
- sizeof()是唯一一个不是函数的运算符，它返回一个变量或者数据类型的字节数
##### 例子：数据类型
```c
#include <stdio.h>
int main(){
  printf("转义字符：a\nabc\bfff\a") //输出结果为：a bcfff 一声响铃
  printf("整型常量：%d,%d,%d\n",12,012,0x12);
  printf("实型常量：%f,%f\n",3.14,3.14e-2);
  printf("字符常量：%c,%c\n",'A','\n');
  printf("字符串常量：%s\n","Hello,world!");
}
```

## 整形数据的输入输出

输入输出
- 输入
  - scanf()
    - 如果两个数字连续输入，可以使用空格、回车、制表符分隔
    - 如果两个数字连续输入，可以使用逗号分隔，但是两个数字之间必须加上逗号
    - 例如：scanf("%d,%d",&a,&b);必须输入1,2，不能输入1 2
    - **scanf()中有\n时必须回车**
- 输出
  - printf()

## 浮点型数据
#### 浮点数比大小
注意：两个浮点数比大小时，**不能直接用==**，因为浮点数在计算机中是以二进制形式存储的，有时候会有误差，使用 $$|a-b|<10^{-6}$$ 来判断两个浮点数是否相等,其中 $10^{-6}$ 是一个机器精度
#### 浮点数修饰
- %f
  - 默认保留6位小数
  - %.2f保留两位小数
- %-10.2f
  - 左对齐，保留两位小数
- %10.2f
  - 右对齐，保留两位小数

#### 字符的输入输出
- 输入
  - scanf("%c%c",&a,&b);
    - 如果输入ab，那么a='a',b='b'
    - 如果输入a b，那么a='a',b=' '
  - scanf("%c %c",&a,&b);
    - 如果输入ab，那么a='a',b='b'
    - 如果输入a b，那么a='a',b='b'
  - scanf("%c,%c",&a,&b);
    - 如果输入a,b，那么a='a',b='b'
  - getchar()
    - 从键盘输入一个字符，不需要回车
- 输出
  - printf("%c%c",a,b);
    - 输出ab
  - putchar(a);
    - 输出a
## 指针
- 指针是一个变量，它的值是一个地址
- 指针变量的定义
  - 数据类型 *指针变量名;
  - int *p;
- 指针变量的赋值
  - p=&a;
  - p=a;
## 数据类型转换
- 自动类型转换
  - 当两个不同类型的数据进行运算时，系统会自动将其中一个数据类型转换为另一个数据类型
  - 规则
    - 如果两个操作数中有一个是double类型，另一个操作数就会转换为double类型
    - 如果两个操作数中有一个是float类型，另一个操作数就会转换为float类型
    - 如果两个操作数中有一个是long类型，另一个操作数就会转换为long类型
    - 如果两个操作数中有一个是unsigned int类型，另一个操作数就会转换为unsigned int类型
    - 如果两个操作数中有一个是int类型，另一个操作数就会转换为int类型
  - 优先级
    - double > float > long > unsigned int > int
- 赋值转换
  - 当一个数据类型的值赋给另一个数据类型的变量时，系统会自动将一个数据类型转换为另一个数据类型
  - 当实型赋值给整型时，小数部分会被截断，字符型赋值给整型时，会将字符的ASCII码赋给整型
- 强制类型转换
  - (数据类型)表达式
  - 例如：(int)3.14
  - 注意：强制类型转换会改变数据的存储方式，可能会改变数据的值

## 输入输出
- printf
  - %[-][m.n] 格式控制符
    - -表示左对齐
    - m表示最小宽度
    - n表示小数位数
  - ++i 和 i++的区别
    - ++i表示先加1再使用
    - i++表示先使用再加1
      - 如:printf("%d%d%d",++i,++i,++i) i=1,输出4，3，2
- scanf
  - scanf("格式输入字符",内存地址)

## 运算符
### 算术运算符
- “+ - * / %”
  - /表示整数除法，%表示取余
  - 例如：5/2=2,5%2=1
  - %的运算结果与被除数的符号相同
  - 整型存在以下等式：a%b=a-(a/b)*b
### 关系运算符
- “> < >= <= == !=”
  - 例如：a>b
### 逻辑运算符
- “&& || !”
  - 例如：a>b&&a>c
### 位运算符
- “& | ^ ~ << >>”
  - 例如：a&b
### 赋值运算符
- “= += -= *= /= %= &= |= ^= <<= >>=”
  - 例如：a+=b
### 条件运算符
- 表达式1?表达式2:表达式3
  - 例如：a>b?a:b
### 逗号运算符
- 表达式1,表达式2
  - 例如：a,b
### 优先级和结合性
- 优先级
  - 逗号运算符 > 赋值运算符 > 条件运算符 > 逻辑或运算符 > 逻辑与运算符 > 位或运算符 > 位异或运算符 > 位与运算符 > 关系运算符 > 移位运算符 > 加减运算符 > 乘除取余运算符
  - 优先级相同的运算符，从左到右结合
- 结合性
  - 从左到右，例如：a+b+c 从左到右
  - 从右到左，例如：a=b=c 从右到左
## 编译预处理
### 宏定义
- #define PI 3.14159
  - #define不是C语言的一部分，是预处理命令，不能以分号结尾
  - #define没有数据类型，只是简单的文本替换
  - 宏定义的好处
    - 提高程序的可读性
    - 提高程序的可维护性
    - 提高程序的可移植性
    - 提高程序的执行效率
  - 取消宏定义
    - #undef
  - 含参宏定义
    - #define MAX(a,b) ((a)>(b)?(a):(b))
    - 注意：含参宏定义不是函数，不会检查参数的类型，只是简单的文本替换，不分配内存空间
  - 和const的区别
    - const是C语言的关键字，const修饰的变量是只读的，凡是const定义的变量不能出现在赋值号的左侧，它是一个左值
    - #define不是C语言的一部分，是预处理命令，不能以分号结尾
    - #define没有数据类型，只是简单的文本替换，而const有数据类型
### 条件编译
- #if #else #elif #endif
  - #if 0
    - 用于注释掉一段代码
  - #ifdef
    - 如果定义了宏，就编译
  - #ifndef
    - 如果没有定义宏，就编译
  - #undef
    - 取消宏定义
### 文件包含
- #include
  - #include <stdio.h>
    - 用于包含系统
  - 写法：双引号和尖括号
    - #include "stdio.h"
    - #include <stdio.h>
    - 区别：双引号表示在当前目录下查找，尖括号表示在系统目录下查找
  - 说明：
    - #include不是C语言的一部分，是预处理命令
    - 在包含的文件中不能出现main函数
    - 包含的文件可以是C语言源文件，也可以是头文件
    - 文件允许嵌套包含

## 附录
### 常用函数及其用法总结
#### rand() 与 srand()
- rand()函数
  - 用于生成一个随机数
  - 用法：int a = rand();
  - 生成范围：0~RAND_MAX
  - 范围控制
    - 生成(a,b)之间的随机数：a+rand()%(b-a)
    - 生成[a,b]之间的随机数：a+rand()%(b-a+1)
    - 生成[a,b)之间的随机数：a+rand()%(b-a)
    - 生成(a,b]之间的随机数：a+rand()%(b-a+1)
- srand()函数
  - 用于生成一个随机数种子
  - 用法：srand((unsigned)time(NULL));
##### 例题

以下代码用于生成三个16~64之间的随机数，并判断是否有两个数相等
```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    srand(time(0));  // 使用当前时间作为随机数种子

    int min = 16, max = 64;
    int num1 = min + rand() % (max + 1 - min);
    int num2 = min + rand() % (max + 1 - min);
    int num3 = min + rand() % (max + 1 - min);

    printf("The three numbers are: %d, %d, %d\n", num1, num2, num3);

    if (num1 == num2 || num1 == num3 || num2 == num3) {
        printf("Yes\n");
    } else {
        printf("No\n");
    }
    system("pause");
    return 0;
}
```